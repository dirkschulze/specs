<h1>CSS Masking Module Level 1</h1>
<pre class='metadata'>
Status: DREAM
Deadline: 2014-02-13
ED: http://dirkschulze.github.io/specs/css-masking-1/
Shortname: css-masking
Link Defaults: css-shapes-1 (property) shape-outside, css-backgrounds-3 (type) <position>, svg (property) color-interpolation/fill/fill-opacity/fill-rule/stroke/glyph-orientation-horizontal/glyph-orientation-vertical/marker-start/marker-end/marker-mid/stop-color/stop-opacity/stroke-dasharray/stroke-dashoffset/stroke-linecap/stroke-linejoin/stroke-miterlimit/stroke-opacity/stroke-width/text-anchor, filters-1 (property) filter/flood-opacity/flood-color/color-interpolation-filters, css-display-3 (property) display, css-transforms-1 (property) transform, css-backgrounds-3 (type) <box>, css-images-4 (property) image-rendering, css-color-3 (property) color, svg (property) dominant-baseline, svg (property) alignment-baseline, svg (property) baseline-shift, css-transforms-1 (dfn) bounding box
Level: 1
Editor: Dirk Schulze, Adobe Systems Inc., dschulze@adobe.com
Editor: Brian Birtles, Mozilla Japan, bbirtles@mozilla.com
Editor: Tab Atkins Jr., Google, http://www.xanthir.com/contact/
Abstract: CSS Masking provides two means for partially or fully hiding portions of visual elements: masking and clipping.
Abstract: Masking describes how to use another graphical element or image as a luminance or alpha mask. Typically, rendering an element via CSS or SVG can conceptually described as if the element, including its children, are drawn into a buffer and then that buffer is composited into the element's parent. Luminance and alpha masks influence the transparency of this buffer before the compositing stage.
Abstract: Clipping describes the visible region of visual elements. The region can be described by using certain SVG graphics elements or basic shapes. Anything outside of this region is not rendered.
Test Suite: http://test.csswg.org/suites/css-masking/nightly-unstable/
</pre>

<style type="text/css">
a[data-link-type=element]::before,span[data-link-type=element]::before {
  content: '<';
}
a[data-link-type=element]::after,span[data-link-type=element]::after {
  content: '>';
}
</style>

<script defer=defer src="https://test.csswg.org/harness/annotate.js#CSS-MASKING_DEV" type="text/javascript"></script>

<h2 id='intro'>Introduction</h2>

This specification defines two different graphical operations which both fully or partly hide portions of an object: clipping and masking.

<h3 id="clipping">Clipping</h3>

<div class="example">
  <div class=figure>
    <img src="images/clipping-path.svg" width="655" height="260" alt="Example Mask">
    <p class=caption>A clipping path (middle) is applied on a polygon shaded with different colors (left). This results in a “clipped out” shape (right).</p>
  </div>
</div>

A closed vector path, shape or polygon defines a so called <dfn export>clipping path</dfn>. This clipping path is a region (in the absence of anti-aliasing) where everything on the “inside” of this region is allowed to show through but everything on the outside is “clipped out” and does not appear on the canvas.

The 'clip-path' property can reference an SVG <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics element</a> or use a specified basic shapes as clipping path.

<h3 id="masking">Masking</h3>

<div class="example">
  <div class=figure>
    <img src="images/luminance-mask.svg" width="655" height="260" alt="Example Mask">
    <p class=caption>A luminance mask (middle) is applied on a shape filled with a gradient (left). This results in a masked shape (right).</p>
  </div>
</div>

The effect of applying a mask to a graphical object is as if the graphical object will be painted onto the background through the mask, thus completely or partially masking out parts of the graphical object.

Masks are applied using the 'mask-image' or 'mask-box-source' properties.

The 'mask-image' property may reference a <a element>mask</a> element. In this case the content of the <a element>mask</a> element is rendered into temporary canvas which has been initialized to transparent black. This temporary canvas is taken as mask image. Alternatively, for many simple uses, the 'mask-image' property may refer directly to images to be used as mask image, forgoing the need for an explicit <a element>mask</a> element. The 'mask' property serves as a shorthand property for 'mask-box', 'mask-image' and other characterizing properties.

The 'mask-box-source' property splits a mask image into 9 pieces. The pieces may be sliced, scaled and stretched in various ways to fit the size of the <i>mask box image area</i>. The 'mask-box' property serves as a shorthand property for 'mask-box-source' and other characterizing properties.

Note: While masking gives many possibilities for enhanced graphical effects and in general provides more control over the “visible portions” of the content, clipping paths can perform better and are easier to interpolate.

<h2 id="placement">Module interactions</h2>

This specification defines a set of CSS properties that affect the visual rendering of elements to which those properties are applied. These effects are applied after elements have been sized and positioned according to the <a href="http://www.w3.org/TR/CSS2/visuren.html" title="Visual formatting model">Visual formatting model</a> from [[!CSS21]]. Some values of these properties result in the creation of a <a spec="css21">stacking context</a>. Furthermore, this specification replaces the section <a href="http://www.w3.org/TR/CSS2/visufx.html#clipping">Clipping: the clip property</a> from [[!CSS21]].

The compositing model follows the SVG compositing model [[!SVG11]]: First the element is styled under absence of filter effects, masking, clipping and opacity. Then the element and its descendants are drawn on a temporary canvas. In a last step the following effects are applied to the element in order: filter effects [[FILTER-EFFECTS]], clipping, masking and opacity.

The terms <i>object bounding box</i> and <i>stroke bounding box</i> follow the definitions in SVG 2 [[!SVG2]].

<h2 id="values">Values</h2>

This specification follows the <a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property definition conventions</a> from [[!CSS21]]. Basic shapes are defined in CSS Shapes Module Level 1 [[!CSS-SHAPES]]. Value types not defined in these specifications are defined in CSS Values and Units Module Level 3 [[!CSS3VAL]].

In addition to the property-specific values listed in their definitions, all properties defined in this specification also accept the <a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a> keyword as their property value. For readability it has not been repeated explicitly.

<h2 id="terminology">Terminology</h2>

Definitions of CSS properties and values in this specification are analogous to definitions in CSS Backgrounds and Borders [[!CSS3BG]]. To avoid redundancy, this specification relies on descriptions and definitions of CSS Backgrounds and Borders. The following terms in CSS Backgrounds and Borders have the following meaning in this specification:

<table class="data" id="term-matching">
  <thead>
    <tr>
      <th>Term in CSS Masking
      <th>Term in [[!CSS3BG]]
    </tr>
  </thead>
  <tbody>
    <tr>
      <th><dfn export>mask images</dfn>
      <td>background images
    </tr>
    <tr>
      <th><dfn export>mask painting area</dfn>
      <td><a spec="css-backgrounds-3">background painting area</a>
    </tr>
    <tr>
      <th><dfn>mask-size</dfn>
      <td>background-size
    </tr>
    <tr>
      <th><dfn>mask-position</dfn>
      <td>background-position
    </tr>
    <tr>
      <th><dfn export>mask positioning area</dfn>
      <td><a spec="css-backgrounds-3">background positioning area</a>
    </tr>
    <tr>
      <th><dfn export>mask box image area</dfn>
      <td><a spec="css-backgrounds-3">border image area</a>
    </tr>
  </tbody>
</table>

<h2 id="clipping-paths">Clipping Paths</h2>

The clipping path restricts the region to which paint can be applied, the so-called <dfn export>clipping region</dfn>. Conceptually, any parts of the drawing that lie outside of this region are not drawn. This includes any content, background, borders, text decoration, outline and visible scrolling mechanism of the element to which the clipping path is applied, and those of its descendants.

An element's ancestors may also clip portions of their content (e.g., via their own 'clip' or 'clip-path' properties and/or if their 'overflow' property is not ''visible''). What is rendered is the cumulative intersection.

If the clipping region exceeds the bounds of the UA's document window, content may be clipped to that window by the native operating environment.

A clipping path is conceptually equivalent to a custom viewport for the element it applies to. Thus, it affects the rendering of an element. It does not affects the element's inherent geometry. The boundaries of a clipped element (i.e. an element which references a <a element>clipPath</a> element via a 'clip-path' property, or a child of the referencing element) must remain the same as if it were not clipped.

<div class=example>
  <p>Consider a shape that is clipped by a clipping path applied to an ancestor:</p>
  <pre><code class=html>&lt;g clip-path="circle()">
    &lt;path id="shape" d="M0,0 L10,10, L 20,0 z"/>
&lt;/g></code></pre>
  <p>The shape is referenced by a <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#UseElement'><code class='element-name'>&lt;use></code></a> element:</p>
  <pre><code class=html>&lt;use xlink:href="#shape"/></code></pre>
  <p>The geometry of the shape is not influenced by the circular clipping path.</p>
</div>

By default, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/interact.html#PointerEventsProperty'>pointer events</a> must not be dispatched on the clipped (non-visible) regions of a shape. For example, an element with a dimension of 10px to 10px which is clipped to a circle with a radius of 5px will not receive ''click'' events outside the <i>clipping region</i>.

<h3 id="the-clip-path">Clipping Shape: the 'clip-path' property</h3>

<pre class='propdef'>
Name: clip-path
Value: <<clip-source>> | [ <<basic-shape>> || <<geometry-box>> ] | none
Initial: none
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: as specified
Computed value: as specified, but with <<url>> values made absolute
Media: visual
Animatable: See 'shape-outside' [[!CSS-SHAPES]]
</pre>

Specifies a basic shape or references a <a element>clipPath</a> element to create a <i>clipping path</i>.

<pre class=prod><dfn>&lt;clip-source></dfn> = <<url>></pre>
<pre class=prod><dfn>&lt;geometry-box></dfn> = <<shape-box>> | fill | stroke | view-box</pre>

<dl dfn-for="clip-path">
  <dt><<basic-shape>></dt>
  <dd>
    A basic shape function as defined in the CSS Shapes module [[!CSS-SHAPES]]. A basic shape makes use of the specified reference box to size and position the basic shape. If no reference box is specified, the <a value for=mask-clip>border-box</a> will be used as reference box.
  </dd>
  <dt><<geometry-box>></dt>
  <dd>
    <p>If specified in combination with a <<basic-shape>> it provides the reference box for the <<basic-shape>>.</p>
    <p>If specified by itself, uses the edges of the specified box, including any corner shaping (e.g. defined by 'border-radius' [[!CSS3BG]]), as clipping path. See also <a href="http://www.w3.org/TR/css-shapes/#shapes-from-box-values">“Shapes from box values”</a> [[!CSS-SHAPES]].</p>
  </dd>
  <dt><dfn dfn-type=value>fill</dfn></dt>
  <dd>
    Uses the <i>object bounding box</i> as reference box.
  </dd>
  <dt><dfn dfn-type=value>stroke</dfn></dt>
  <dd>
    Uses the <i>stroke bounding box</i> as reference box.
  </dd>
  <dt><dfn dfn-type=value>view-box</dfn></dt>
  <dd>
    <p>Uses the nearest <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> as reference box.</p>
    <p>If a <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute is specified for the <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> creating element:
      <ul>
        <li>The reference box is positioned at the origin of the coordinate system established by the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
        <li>The dimension of the reference box is set to the <em>width</em> and <em>height</em> values of the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
      </ul>
    </p>
  </dd>
  <dt>none</dt>
  <dd>
    No <i>clipping path</i> gets created.
  </dd>
</dl>

For SVG elements without associated CSS layout box, the values <a value for=mask-clip>content-box</a>, <a value for=mask-clip>padding-box</a>, <a value for=mask-clip>border-box</a> and <a value for=mask-clip>margin-box</a> compute to <a value for=clip-path>fill</a>.

For elements with associated CSS layout box, the values <a value for=clip-path>fill</a>, <a value for=clip-path>stroke</a> and <a value for=clip-path>view-box</a> compute to <em>border-box</em>.



A computed value of other than ''none'' results in the creation of a <a spec="css21">stacking context</a> [[!CSS21]] the same way that CSS 'opacity' [[CSS3COLOR]] does.

If the URI reference is not valid (e.g it points to an object that doesn't exist or the object is not a <a element>clipPath</a> element), no clipping is applied.

<div class=example>
  <p></p>
  <pre><code class=css>clip-path: polygon(15px 99px, 30px 87px, 65px 99px, 85px 55px,
                122px 57px, 184px 73px, 198px 105px, 199px 150px,
                145px 159px, 155px 139px, 126px 120px, 112px 138px,
                80px 128px, 39px 126px, 24px 104px);</code></pre>
</div>

<div class=example>
  <p></p>
  <pre><code class=css>clip-path: url("#clip1");</code></pre>

  <pre><code class=html>&lt;svg>
&lt;clipPath id="clip1">
    &lt;path d="15,99 30,87 65,99 85,55 122,57 184,73 198,105
      199,150 145,159 155,139 126,120 112,138 80,128 39,126
      24,104"/>
&lt;/clipPath>
&lt;/svg></code></pre>
</div>

<h2 id="svg-clipping-paths">SVG Clipping Path Sources</h2>

<h3 id="ClipPathElement">The <a element>clipPath</a> element</h3> 

<table class="definition-table">
  <tr>
    <th>Name:</th>
    <td><dfn element>clipPath</dfn>
  </tr>
  <tr>
    <th>Categories:</th>
    <td>None.</td>
  </tr>
  <tr>
    <th>Content model:</th>
    <td>Any number of the following elements, in any order: <ul class=no-bullets><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermDescriptiveElement'>descriptive</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DescElement'><span class=element-name>&lt;desc></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#TitleElement'><span class=element-name>&lt;title></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/metadata.html#MetadataElement'><span class=element-name>&lt;metadata></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermAnimationElement'>animation</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement'><span class=element-name>&lt;animate></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateColorElement'><span class=element-name>&lt;animateColor></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateMotionElement'><span class=element-name>&lt;animateMotion></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateTransformElement'><span class=element-name>&lt;animateTransform></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement'><span class=element-name>&lt;set></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermShapeElement'>shape</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#CircleElement'><span class=element-name>&lt;circle></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#EllipseElement'><span class=element-name>&lt;ellipse></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#LineElement'><span class=element-name>&lt;line></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/paths.html#PathElement'><span class=element-name>&lt;path></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#PolygonElement'><span class=element-name>&lt;polygon></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#PolylineElement'><span class=element-name>&lt;polyline></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#RectElement'><span class=element-name>&lt;rect></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#TextElement'><span class=element-name>&lt;text></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#UseElement'><span class=element-name>&lt;use></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/script.html#ScriptElement'><span class=element-name>&lt;script></span></a></li></ul></td>
  </tr>
  <tr>
    <th>Attributes:</th>
    <td><ul class=no-bullets><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermConditionalProcessingAttribute'>conditional processing attributes</a><span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#RequiredFeaturesAttribute'><span class=attr-name>‘requiredFeatures’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#RequiredExtensionsAttribute'><span class=attr-name>‘requiredExtensions’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SystemLanguageAttribute'><span class=attr-name>‘systemLanguage’</span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermCoreAttributes'>core attributes</a><span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#IDAttribute'><span class=attr-name>‘id’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLBaseAttribute'><span class=attr-name>‘xml:base’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLLangAttribute'><span class=attr-name>‘xml:lang’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLSpaceAttribute'><span class=attr-name>‘xml:space’</span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermPresentationAttribute'>presentation attributes</a><span class=expanding> — <a property>alignment-baseline</a>, <a property>baseline-shift</a>, <a property>clip</a>, <a property>clip-path</a>, <a property>clip-rule</a>, <a property>color</a>, <a property>color-interpolation</a>, <a property>color-interpolation-filters</a>, <a property>color-profile</a>, <a property>color-rendering</a>, <a property>cursor</a>, <a property>direction</a>, <a property>display</a>, <a property>dominant-baseline</a>, <a property>enable-background</a>, <a property>fill</a>, <a property>fill-opacity</a>, <a property>fill-rule</a>, <a property>filter</a>, <a property>flood-color</a>, <a property>flood-opacity</a>, <a property>font</a>, <a property>font-family</a>, <a property>font-size</a>, <a property>font-size-adjust</a>, <a property>font-stretch</a>, <a property>font-style</a>, <a property>font-variant</a>, <a property>font-weight</a>, <a property>glyph-orientation-horizontal</a>, <a property>glyph-orientation-vertical</a>, <a property>image-rendering</a>, <a property>kerning</a>, <a property>letter-spacing</a>, <a property>lighting-color</a>, <a property>marker</a>, <a property>marker-end</a>, <a property>marker-mid</a>, <a property>marker-start</a>, <a property>mask</a>, <a property>opacity</a>, <a property>overflow</a>, <a property>pointer-events</a>, <a property>shape-rendering</a>, <a property>stop-color</a>, <a property>stop-opacity</a>, <a property>stroke</a>, <a property>stroke-dasharray</a>, <a property>stroke-dashoffset</a>, <a property>stroke-linecap</a>, <a property>stroke-linejoin</a>, <a property>stroke-miterlimit</a>, <a property>stroke-opacity</a>, <a property>stroke-width</a>, <a property>text-anchor</a>, <a property>text-decoration</a>, <a property>text-rendering</a>, <a property>unicode-bidi</a>, <a property>visibility</a>, <a property>word-spacing</a>, <a property>writing-mode</a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#ClassAttribute'><span class=attr-name>‘class’</span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleAttribute'><span class=attr-name>‘style’</span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#ExternalResourcesRequiredAttribute'><span class=attr-name>‘externalResourcesRequired’</span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#TransformAttribute'><span class=attr-name>‘transform’</span></a></li><li><a element-attr for=clipPath>clipPathUnits</a></li></ul></td>
  </tr>
  <tr>
    <th>DOM Interfaces:</th>
    <td><a class=idlinterface href='#InterfaceSVGClipPathElement'>SVGClipPathElement</a></td>
  </tr>
</table>


<div class="adef-list">
  <p><em>Attribute definitions:</em></p>
  <dl dfn-type=element-attr dfn-for=clipPath>
    <dt>
      <dfn element-attr>clipPathUnits</dfn> = "<a value for=clipPathUnits>userSpaceOnUse</a> | <a value for=clipPathUnits>objectBoundingBox</a>"
    </dt>
    <dd>
      <p>Defines the coordinate system for the contents of the <a element>clipPath</a>.</p>
      <dl>
        <dt><dfn dfn-type=value dfn-for=clipPathUnits>userSpaceOnUse</dfn></dt>
        <dd>
          <p>The contents of the <a element>clipPath</a> represent values in the current <i>user coordinate system</i> in place at the time when the <a element>clipPath</a> element is referenced (i.e., the <i>user coordinate system</i> for the element referencing the <a element>clipPath</a> element via the 'clip-path' property).</p>
        </dd>
        <dt><dfn dfn-type=value dfn-for=clipPathUnits>objectBoundingBox</dfn></dt>
        <dd>
          <p>The coordinate system has its origin at the top left corner of the <i>bounding box</i> of the element to which the clipping path applies to and the same width and height of this <i>bounding box</i>. <a href="http://www.w3.org/TR/SVG/coords.html#Units">User coordinates</a> are sized equivalently to the CSS ''px'' unit.</p>
        </dd>
      </dl>
      <p>If attribute <a element-attr>clipPathUnits</a> is not specified, then the effect is as if a value of <a value for=clipPathUnits>userSpaceOnUse</a> were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
  </dl>
</div>

CSS properties inherit into the <a element>clipPath</a> element from its ancestors; properties do <em>not</em> inherit from the element referencing the <a element>clipPath</a> element.

<a element>clipPath</a> elements are never rendered directly; their only usage is as something that can be referenced using the 'clip-path' property. The 'display' property does not apply to the <a element>clipPath</a> element; thus, <a element>clipPath</a> elements are not directly rendered even if the 'display' property is set to a value other than ''none'', and <a element>clipPath</a> elements are available for referencing even when the 'display' property on the <a element>clipPath</a> element or any of its ancestors is set to ''none''.

A <a element>clipPath</a> element can contain <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/paths.html#PathElement'><code class='element-name'>&lt;path></code></a> elements, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#TextElement'><code class='element-name'>&lt;text></code></a> elements, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermBasicShapeElement'>basic shapes</a> (such as <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#CircleElement'><code class='element-name'>&lt;circle></code></a>) or a <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#UseElement'><code class='element-name'>&lt;use></code></a> element. If a <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#UseElement'><code class='element-name'>&lt;use></code></a> element is a child of a <a element>clipPath</a> element, it must directly reference <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/paths.html#PathElement'><code class='element-name'>&lt;path></code></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#TextElement'><code class='element-name'>&lt;text></code></a> or <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermBasicShapeElement'>basic shapes</a> elements. Indirect references are an error and the <a element>clipPath</a> element must be ignored.

The raw geometry of each child element exclusive of rendering properties such as 'fill', 'stroke', 'stroke-width' within a <a element>clipPath</a> conceptually defines a 1-bit mask (with the possible exception of anti-aliasing along the edge of the geometry) which represents the silhouette of the graphics associated with that element. Anything outside the outline of the object is masked out. If a child element is made invisible by 'display' or 'visibility' it does not contribute to the clipping path. When the <a element>clipPath</a> element contains multiple child elements, the silhouettes of the child elements are logically OR'd together to create a single silhouette which is then used to restrict the region onto which paint can be applied. Thus, a point is inside the clipping path if it is inside any of the children of the <a element>clipPath</a>.

For a given graphics element, the actual clipping path used will be the intersection of the clipping path specified by its 'clip-path' property (if any) with any clipping paths on its ancestors, as specified by the 'clip-path' property on the elements which establish a new viewport. (See [[!SVG11]])

A couple of additions:

<ul>
  <li>The <a element>clipPath</a> element itself and its child elements do <em>not</em> inherit clipping paths from the ancestors of the <a element>clipPath</a> element.</li>
  <li>The <a element>clipPath</a> element or any of its children can specify property 'clip-path'.<br> If a valid 'clip-path' reference is placed on a <a element>clipPath</a> element, the resulting clipping path is the intersection of the contents of the <a element>clipPath</a> element with the referenced clipping path.<br> If a valid 'clip-path' reference is placed on one of the children of a <a element>clipPath</a> element, then the given child element is clipped by the referenced clipping path before OR'ing the silhouette of the child element with the silhouettes of the other child elements.</li>
  <li>An empty clipping path will completely clip away the element that had the 'clip-path' property applied.</li>
</ul>

<h3 id="the-clip-rule">Winding Rules: the 'clip-rule' property</h3>

<pre class='propdef'>
Name: clip-rule
Value: nonzero | evenodd
Initial: nonzero
Applies to: Applies to SVG <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: yes
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

The 'clip-rule' property specifies the used winding rule for a <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics element</a>.

<dl>
  <dt><dfn>nonzero</dfn></dt>
  <dd>See description of 'fill-rule' property [[!SVG11]].</dd>
  <dt><dfn>evenodd</dfn></dt>
  <dd>See description of 'fill-rule' property [[!SVG11]].</dd>
</dl>

The 'clip-rule' property only applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a> that are contained within a <a element>clipPath</a> element.

Note: The 'clip-rule' property does not apply to <<basic-shape>>s.

<div class=example>
<p>The following fragment of code will cause an evenodd clipping rule to be applied to the clipping path because 'clip-rule' is specified on the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/paths.html#PathElement'><code class='element-name'>&lt;path></code></a> element that defines the clipping shape:</p>

<pre><code class=html>
&lt;g clip-rule="nonzero"&gt;
  &lt;clipPath id="MyClip"&gt;
    &lt;path d="..." clip-rule="evenodd" /&gt;
  &lt;/clipPath&gt;
  &lt;rect clip-path="url(#MyClip)" ... /&gt;
&lt;/g&gt;</code></pre>

<p>whereas the following fragment of code will <em>not</em> cause an evenodd clipping rule to be applied because the 'clip-rule' is specified on the referencing element, not on the object defining the clipping shape:</p>

<pre><code class=html>
&lt;g clip-rule="nonzero"&gt;
  &lt;clipPath id="MyClip"&gt;
    &lt;path d="..." /&gt;
  &lt;/clipPath&gt;
  &lt;rect clip-path="url(#MyClip)" clip-rule="evenodd" ... /&gt;
&lt;/g&gt;</code></pre>
</div>

<h2 id="masking">Positioned Masks</h2>

<h3 id="the-mask-image">Mask Image Source: the 'mask-image' property</h3>

<pre class='propdef'>
Name: mask-image
Value: <<mask-reference>>#
Initial: none
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified, but with URIs made absolute
Media: visual
Animatable: no
</pre>

This property sets the mask image of an element. Where:

<pre class=prod><dfn>&lt;mask-reference></dfn> = none | <<image>> | <<mask-source>></pre>

<pre class=prod><dfn>&lt;mask-source></dfn> = <<url>></pre>

<dl dfn-type=value dfn-for="mask-image">
  <dt><dfn>&lt;url></dfn></dt>
  <dd>
    A URL reference to a <a element>mask</a> element (for example ''url(commonmasks.svg#mask)'') or to a CSS image.
  </dd>
  <dt>none</dt>
  <dd>
    A value of ''none'' counts as an image layer but does not mask the element.
  </dd>
</dl>

A computed value of other than ''none'' results in the creation of a <a spec="css21">stacking context</a> [[!CSS21]] the same way that CSS 'opacity' [[CSS3COLOR]] does.

A mask reference that is an empty image (zero width or zero height), that fails to download, is not a reference to an <a element>mask</a> element, is non-existent, or that cannot be displayed (e.g. because it is not in a supported image format) is ignored. It still counts as an image layer but does not mask the element.

See the section <a href="#MaskValues">“Mask processing”</a> for how to process a mask image.

<div class="example">
<p>Examples for mask references:</p>
<pre><code class=css>
body { mask-image: linear-gradient(black 0%, transparent 100%) }
p { mask-image: none }
div { mask-image: url(resources.svg#mask2) }</code></pre>
</div>

<h3 id="the-mask-type">Mask Image Interpretation: the 'mask-type' property</h3>

<pre class='propdef'>
Name: mask-type
Value: <<source-type>>
Initial: auto
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

The 'mask-type' property indicates whether the <<mask-reference>> is treated as luminance mask or alpha mask. (See <a href="#MaskValues">Mask processing</a>.)

<pre class=prod><dfn>&lt;source-type></dfn> = alpha | luminance | auto</pre>

Values have the following meanings:

<dl dfn-type=value dfn-for="mask-type">
  <dt><dfn>alpha</dfn></dt>
  <dd>
    A value of <a value for=mask-type>alpha</a> indicates that the alpha values of the mask image should be used as the mask values. See <a href="#MaskValues">Calculating mask values</a>.
  </dd>
  <dt><dfn>luminance</dfn></dt>
  <dd>
    A value of <a value for=mask-type>luminance</a> indicates that the luminance values of the mask image should be used as the mask values. See <a href="#MaskValues">Calculating mask values</a>.
  </dd>
  <dt><dfn>auto</dfn></dt>
  <dd>
    <p>If the <<mask-reference>> of the 'mask-image' property is of type <<mask-source>> the luminance values of the mask image should be used as the mask values.</p>
    <p>If the <<mask-reference>> of the 'mask-image' property is of type <<image>> the alpha values of the mask image should be used as the mask values.</p>
  </dd>
</dl>

<div class="example">
<p>In the following example, the 'mask-source-type' property sets the mask type value for the <a element>mask</a> element to <a value for=mask-source-type>alpha</a>. The 'mask-image' property has a reference to this <a element>mask</a> element and the 'mask-type' property has a value of <a value for=mask-type>luminance</a>. The 'mask-type' property will override the definition of 'mask-source-type' to <a value for=mask-source-type>luminance</a>.</p>

<pre><code class=html>
&lt;mask id="SVGMask" mask-source-type="alpha" maskContentUnits="objectBoundingBox"&gt;
  &lt;radialGradient id="radialFill"&gt;
    &lt;stop stop-color="white" offset="0"/&gt;
    &lt;stop stop-color="black" offset="1"/&gt;
  &lt;/radialGradient&gt;
  &lt;circle fill="url(#radialFill)" cx="0.5" cy="0.5" r="0.5"/&gt;
&lt;/mask&gt;

&lt;style&gt;
  rect {
    mask-image: url(#SVGMask);
    mask-type: luminance;
  }
&lt;/style&gt;

&lt;rect width="200" height="200" fill="green"/&gt;</code></pre>
</div>

<h3 id="the-mask-repeat">Tiling Mask Images: The 'mask-repeat' property</h3>

<pre class='propdef'>
Name: mask-repeat
Value: <<repeat-style>>
Initial: no-repeat
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: Consists of: two keywords, one per dimension
Media: visual
Animatable: no
</pre>

Specifies how mask images are tiled after they have been <a href="#the-mask-size">sized</a> and <a href="#the-mask-position">positioned</a>.

See 'background-repeat' property [[!CSS3BG]] for the definitions of the property values.

<div class=example>
  <pre><code class=css>
body {
    background-color: blue;
    mask-image: url(dot-mask.png) luminance;
    mask-repeat: space;
}</code></pre>

  <div class=figure>
    <p><img src="images/mask-repeat.svg" alt="Image of an element with a dotted mask." width="240" style="border: solid black 1px;">

    <p class=caption>The effect of ''space'': the mask image of a dot is
    tiled to cover the whole <i>mask painting area</i> and the
    mask images are equally spaced.
  </div>
</div>

<h3 id="the-mask-position">Positioning Mask Images: the 'mask-position' property</h3>

<pre class='propdef'>
Name: mask-position
Value: <<position>>
Initial: center
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: refer to size of <i>mask painting area</i> <em>minus</em> size of mask image; see text 'background-position' [[!CSS3BG]]
Computed value: Consisting of: two keywords representing the origin and two offsets from that origin, each given as an absolute length (if given a <<length>>), otherwise as a percentage.
Media: visual
Animatable: as <a href="http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list">simple list</a> of <a href="http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc">length, percentage, or calc
</pre>

See the 'background-position' property [[!CSS3BG]] for the definitions of the property values.

<div class="example">
  <p>In the example below, the (single) image is placed in the lower-right
  corner of the viewport.</p>
  <pre><code class=css>
body {
    mask-image: url("logo.png");
    mask-position: 100% 100%;
    mask-repeat: no-repeat;
}</code></pre>
</div>

<div class=example>
<p>Mask positions can also be relative to other corners than the top left. E.g., the following puts the background image 10px from the bottom and 3em from the right:</p>

<pre><code class=css>mask-position: right 3em bottom 10px</code></pre>
</div>

<h3 id="the-mask-clip">Masking Area: the 'mask-clip' property</h3>

<pre class='propdef'>
Name: mask-clip
Value: <<geometry-box>> | no-clip
Initial: border-box
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

Determines the <i>mask painting area</i>, which determines the area that is affected by the mask. The painted content of an element may be restricted to this area.

Values have the following meanings:

<dl dfn-for=mask-clip dfn-type=value>
  <dt><dfn>content-box</dfn></dt> 
  <dd>
    The painted content is restricted to (clipped to) the <em>content box</em>.
  </dd>
  <dt><dfn>padding-box</dfn></dt>
  <dd>
    The painted content is restricted to (clipped to) the <em>padding box</em>.
  </dd>
  <dt><dfn>border-box</dfn></dt>
  <dd>
    The painted content is restricted to (clipped to) the <em>border box</em>.
  </dd>
  <dt><dfn>margin-box</dfn></dt>
  <dd>
    The painted content is restricted to (clipped to) the <em>masking box</em>.
  </dd>
  <dt><dfn>fill</dfn></dt>
  <dd>
    The painted content is restricted to (clipped to) the <i>object bounding box</i>.
  </dd>
  <dt><dfn>stroke</dfn></dt>
  <dd>
    The painted content is restricted to (clipped to) the <i>stroke bounding box</i>.
  </dd>
  <dt><dfn>view-box</dfn></dt>
  <dd>
    <p>Uses the nearest <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> as reference box.</p>
    <p>If a <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute is specified for the <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> creating element:
      <ul>
        <li>The reference box is positioned at the origin of the coordinate system established by the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
        <li>The dimension of the reference box is set to the <em>width</em> and <em>height</em> values of the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
      </ul>
    </p>
  </dd>
  <dt><dfn>no-clip</dfn></dt>
  <dd>
    The painted content is not restricted (not clipped).
  </dd>
</dl>

For SVG elements without associated CSS layout box, the values <a value for=mask-clip>content-box</a>, <a value for=mask-clip>padding-box</a>, <a value for=mask-clip>border-box</a> and <a value for=mask-clip>margin-box</a> compute to <a value for=mask-clip>fill</a>.

For elements with associated CSS layout box, the values <a value for=mask-clip>fill</a>, <a value for=mask-clip>stroke</a> and <a value for=mask-clip>view-box</a> compute to the initial value of 'mask-clip'.

<h3 id="the-mask-origin">Positioning Area: the 'mask-origin' property</h3>

<pre class='propdef'>
Name: mask-origin
Value: <<geometry-box>>
Initial: border-box
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

For elements rendered as a single box, specifies the <i>mask positioning area</i>. For elements rendered as multiple boxes (e.g., inline boxes on several lines, boxes on several pages) specifies which boxes 'box-decoration-break' operates on to determine the mask positioning area.

<dl dfn-for=mask-origin dfn-type=value>
  <dt><dfn>content-box</dfn></dt>
  <dd>
    The position is relative to the <em>content box</em>.
  </dd>
  <dt><dfn>padding-box</dfn></dt>
  <dd>
    The position is relative to the <em>padding box</em>. (For single boxes ''0 0'' is the upper left corner of the padding edge, ''100% 100%'' is the lower right corner.)
  </dd>
  <dt><dfn>border-box</dfn></dt>
  <dd>
    The position is relative to the <em>border box</em>.
  </dd>
  <dt><dfn>margin-box</dfn></dt>
  <dd>
    The position is relative to the <em>margin box</em>.
  </dd>
  <dt><dfn>fill</dfn></dt>
  <dd>
    The position is relative to the <i>object bounding box</i>.
  </dd>
  <dt><dfn>stroke</dfn></dt>
  <dd>
    The position is relative to the <i>stroke bounding box</i>.
  </dd>
  <dt><dfn>view-box</dfn></dt>
  <dd>
    <p>Uses the nearest <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> as reference box.</p>
    <p>If a <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute is specified for the <a href="http://www.w3.org/TR/SVG11/intro.html#TermSVGViewport">SVG viewport</a> creating element:
      <ul>
        <li>The reference box is positioned at the origin of the coordinate system established by the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
        <li>The dimension of the reference box is set to the <em>width</em> and <em>height</em> values of the <a class='attr-name' href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#ViewBoxAttribute'>‘viewBox‘</a> attribute.</li>
      </ul>
    </p>
  </dd>
</dl>

For SVG elements without associated CSS layout box, the values <a value for=mask-origin>content-box</a>, <a value for=mask-origin>padding-box</a>, <a value for=mask-origin>border-box</a> and <a value for=mask-origin>margin-box</a> compute to <a value for=mask-origin>fill</a>.

For elements with associated CSS layout box, the values <a value for=mask-origin>fill</a>, <a value for=mask-origin>stroke</a> and <a value for=mask-origin>view-box</a> compute to the initial value of 'mask-origin'.

Note: If 'mask-clip' is <a value for=mask-origin>padding-box</a>, 'mask-origin' is <a value for=mask-origin>border-box</a>, 'mask-position' is ''top left'' (the initial value), and the element has a non-zero border, then the top and left of the mask image will be clipped.

<h3 id="the-mask-size">Sizing Mask Images: the 'mask-size' property</h3>

<pre class='propdef'>
Name: mask-size
Value: <<bg-size>>
Initial: border-box
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified, but with lengths made absolute
Media: visual
Animatable: as <a href="http://dev.w3.org/csswg/css3-transitions/#animtype-simple-list">simple list</a> of <a href="http://dev.w3.org/csswg/css3-transitions/#animtype-lpcalc">length, percentage, or calc</a> (<span class="note">This means keyword values are not animatable.</span>)
</pre>

Specifies the size of the mask images.

See 'background-size' property [[!CSS3BG]] for the definitions of the property values.

<h3 id="the-mask-composite">Compositing mask layers: the 'mask-composite' property</h3>

<pre class='propdef'>
Name: mask-composite
Value: <<composite-operator>>#
Initial: source-over
Applies to: All elements. In SVG, it applies to container elements without the <defs> element and all graphics elements
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

<pre class=prod><dfn>&lt;composite-operator></dfn> = clear | copy | source-over | source-in | source-out | source-atop |
    destination-over | destination-in | destination-out | destination-atop | xor | lighter</pre>

Defines a Porter Duff compositing operator for each mask layer [[!COMPOSITING-1]].

A specified compositing operator defines the compositing operation for the current mask layer with the immediate mask layer below it. If there is no further mask layer, the compositing operator must be ignored. Mask layers must not composite with the element's content or the content behind the element, instead they must act as if they are rendered into an isolated group.

<dl dfn-for=mask-composite dfn-type=value>
  <dt><dfn>clear</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_clear">Clear</a>.</dd>
  <dt><dfn>copy</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_src">Copy</a>.</dd>
  <dt><dfn>source-over</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_srcover">Source Over</a>.</dd>
  <dt><dfn>source-in</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_srcin">Source In</a>.</dd>
  <dt><dfn>source-out</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_srcout">Source Out</a>.</dd>
  <dt><dfn>source-atop</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_srcatop">Source Atop</a>.</dd>
  <dt><dfn>destination-over</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_dstover">Destination Over</a>.</dd>
  <dt><dfn>destination-in</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_dstin">Destination In</a>.</dd>
  <dt><dfn>destination-out</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_dstout">Destination Out</a>.</dd>
  <dt><dfn>destination-atop</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_dstatop">Destination Atop</a>.</dd>
  <dt><dfn>xor</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_xor">XOR</a>.</dd>
  <dt><dfn>lighter</dfn></dt>
  <dd>The Porter Duff composite operator <a href="http://www.w3.org/TR/compositing-1/#porterduffcompositingoperators_plus">Lighter</a>.</dd>
</dl>

<div class=example>
An example of the initial compositing operator <i for=mask-composite value>source-over</i>. Both mask layers will be drawn on top of each other. The result will be used to mask the content of the element.

<pre><code class=css>
mask-image: circle.svg, rect.svg;
mask-composite: source-over;
</code></pre>
</div>

<div class=example>
An example of the compositing operator <i for=mask-composite value>destination-in</i>. The top layer “masks” the mask layer below. Just areas where both, <code>circle.svg</code> and <code>rect.svg</code> are visible will be used as mask.

<pre><code class=css>
mask-image: circle.svg, rect.svg;
mask-composite: destination-in;
</code></pre>
</div>

<div class=example>
An example of the compositing operator <i for=mask-composite value>xor</i>. The resulting mask will be the visible areas of <code>circle.svg</code> and <code>rect.svg</code> where both do NOT overlap.

<pre><code class=css>
mask-image: circle.svg, rect.svg;
mask-composite: xor;
</code></pre>
</div>

<h3 id="the-mask">Mask Shorthand: the 'mask' property</h3>

<pre class='propdef'>
Name: mask
Value: <<mask-layer>>
Initial: border-box
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: see individual properties
Computed value: see individual properties
Media: visual
Animatable: see individual properties
</pre>

<pre class=prod><dfn>&lt;mask-layer></dfn> = <<mask-reference>> <<source-type>>? || <<position>> [ / <<bg-size>> ]? ||
    <<repeat-style>> || <<geometry-box>> || [ <<geometry-box>> | no-clip ] || <<composite-operator>></pre>

If one <<geometry-box>> value is present then it sets both 'mask-origin' and 'mask-clip' to that value. If two <<geometry-box>> values are present, then the first sets 'mask-origin' and the second 'mask-clip'.

The <i>used value</i> of the properties 'mask-image', 'mask-repeat', 'mask-position', 'mask-clip', 'mask-origin' and 'mask-size' must have no effect if <<mask-reference>> references a <a element>mask</a> element. In this case the element defines position, sizing and clipping of the mask image.

The 'mask' shorthand also resets 'mask-box' to its initial value. It is therefore recommended that authors use the 'mask' shorthand, rather than other shorthands or the individual properties, to override any mask settings earlier in the cascade. This will ensure that 'mask-box' has also been reset to allow the new styles to take effect.

Note: A future level of this specification will allow different mask layers for various additional masking operations like composited mask layers masking and serial layer masking.

<h3 id="the-mask-image-rendering-model">The Mask Image Rendering Model</h3>

The application of the 'mask-image' property to an element formatted with the CSS box model establishes a <a spec="css21">stacking context</a> in the same way that CSS 'opacity' [[CSS3COLOR]] does, and all the element's descendants are rendered together as a group with the masking applied to the group as a whole.

The 'mask-image' property has no effect on the geometry or hit-testing of any element's CSS boxes.

<h4 id="MaskValues">Mask processing</h4>

A mask image may be interpreted using one of two different methods with regards to calculating the mask values that will be multiplied with the target alpha values.

The first and simplest method of calculating the mask values is to use the alpha channel of the mask image. In this case the mask value at a given point is simply the value of the alpha channel at that point. The color channels do not contribute to the mask value.

The second method of calculating the mask values is to use the luminance of the mask image. In this case the mask value at a given point is computed from the color channel values and alpha channel value using the following procedure.

<ol>
  <li>Compute a luminance value from the color channel values.
    <ul>
      <li>If the computed value of 'color-interpolation' on the <a element>mask</a> element is ''linearRGB'', convert the original image color values (potentially in the sRGB color space) to the linearRGB color space.</li>
      <li>Then, using non-premultiplied RGB color values, apply the luminance-to-alpha coefficients (as defined in the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/filters.html#feColorMatrixElement'><code class='element-name'>&lt;feColorMatrix></code></a> filter primitive [[!SVG11]]) to convert the RGB color values to luminance values.</li>
    </ul>
  </li>
  <li>Multiply the computed luminance value by the corresponding alpha value to produce the mask value.</li>
</ol>

Regardless of the method used, the procedure for calculating mask values assumes the content of the mask is a four-channel RGBA graphics object. For other types of graphics objects, special handling is required as follows.

For a three-channel RGB graphics object that is used in a mask (e.g., when referencing a three-channel image file), the effect is as if the object were converted into a four-channel RGBA image with the alpha channel uniformly set to 1.

For a single-channel image that is used in a mask (e.g., when referencing a single-channel grayscale image file), the effect is as if the object were converted into a four-channel RGBA image, where the single channel from the referenced object is used to compute the three color channels and the alpha channel is uniformly set to 1.

Note: When referencing a grayscale image file, the transfer curve relating the encoded grayscale values to linear light values must be taken into account when computing the color channels.

Note: SVG <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a> (e.g., <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#CircleElement'><code class='element-name'>&lt;circle></code></a> or <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#TextElement'><code class='element-name'>&lt;text></code></a>) are all treated as four-channel RGBA images for the purposes of masking operations.

The effect of a mask is identical to what would have happened if there were no mask but instead the alpha channel of the given object were multiplied with the mask's resulting mask values.

Regions not covered by a mask image are treated as transparent black. The mask value is 0.

<h2 id="box-masks">Box Masks</h2>

With 'mask-box' an image can be split into nine pieces: four corners, four edges and the middle piece as demonstrated in the figure below.

<div class=figure>
  <img src="images/mask-box-image-mask.svg" alt="pieces of a mask box image" width="240">
  <p class=caption>Pieces of a mask box image.</p>
</div>

These pieces may be sliced, scaled and stretched in various ways to fit the size of the <i>mask box image area</i>. This distorted image is then used as a mask. The syntax of 'mask-box' corresponds to the 'border-image' property of CSS Background and Borders [[!CSS3BG]].

<div class=example>
<p>The mask image in the following example is split into four corners with
dimensions of 75 pixels, four edges and the middle piece that is stretched
and scaled.</p>

<div class=figure>
  <img src="images/mask-box-image.svg" alt="Example for 'mask-box'" width="720" height="240">
  <p class=caption>Example for 'mask-box'. The object on the left is the object to mask. The second image is the alpha mask and the last image the masked object.</p>
</div>

<pre><code style=css>div {
    background: linear-gradient(bottom, #F27BAA 0%, #FCC8AD 100%);
    mask-box-slice: 25 fill;
    mask-box-repeat: stretch;
    mask-box-source: url(mask.png);
}</code></pre>
</div>

<h3 id="the-mask-box-source">Mask Image Source: the 'mask-box-source' property</h3>

<pre class='propdef'>
Name: mask-box-source
Value: none | <<image>>
Initial: none
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: ''none'' or the image with its URI made absolute
Media: visual
Animatable: no
</pre>

Specifies an image to be used as mask image.

An image that is an empty image (zero width or zero height), that fails to download, is non-existent, or that cannot be displayed (e.g. because it is not in a supported image format) is ignored. It still counts as an mask image but does not mask the element.

See “<a href="#MaskValues">Mask processing</a>” on how to process the mask image.

A computed value of other than ''none'' results in the creation of a <a spec="css21">stacking context</a> [[!CSS21]] the same way that CSS 'opacity' [[CSS3COLOR]] does.

<h3 id="the-mask-box-slice">Mask Image Slicing: the 'mask-box-slice' property</h3>

<pre class='propdef'>
Name: mask-box-slice
Value: [<<number>> | <<percentage>>]{1,4} fill?
Initial: 0 fill
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: refer to size of the mask image
Computed value: as specified
Media: visual
Animatable: no
</pre>

This property specifies inward offsets from the top, right, bottom, and left edges of the mask image, dividing it into nine regions: four corners, four edges and a middle. The middle image part is discarded (treated as fully transparent black) unless the <dfn dfn-for=mask-box-slice dfn-type=value>fill</dfn> keyword is present.

See the 'border-image-slice' property [[!CSS3BG]] for the definitions of the property values.

<h3 id="the-mask-box-width">Masking Areas: the 'mask-box-width' property</h3>

<pre class='propdef'>
Name: mask-box-width
Value: [ <<length>> | <<percentage>> | <<number>> | auto ]{1,4}
Initial: auto
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: relative to width/height of the <i>mask box image area</i>
Computed value: all <<length>>s made absolute, otherwise as specified
Media: visual
Animatable: no
</pre>

The mask image is drawn inside an area called the <i>mask box image area</i>. This is an area whose boundaries by default correspond to the mask box, see 'mask-box-outset'.

See the 'border-image-width' property [[!CSS3BG]] for the definitions of the property values.

Note: For SVG elements without an associated layout box the 'border-width' is considered to be ''0''.

<h3 id="the-mask-box-outset">Edge Overhang: the 'mask-box-outset' property</h3>

<pre class='propdef'>
Name: mask-box-outset
Value: [ <<length>> | <<number>> ]{1,4}
Initial: 0
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: all <<length>>s made absolute, otherwise as specified
Media: visual
Animatable: no
</pre>

The values specify the amount by which the <i>mask box image area</i> extends beyond the border box. If it has four values, they set the outsets on the top, right, bottom and left sides in that order. If the left is missing, it is the same as the right; if the bottom is missing, it is the same as the top; if the right is missing, it is the same as the top.

As with 'mask-box-width', a <<number>> represents a multiple of the corresponding 'border-width'. Negative values are not allowed for any of the 'mask-box-outset' values.

Note: For SVG elements without associated layout box the 'border-width' is considered to be ''0''.

<h3 id="the-mask-box-repeat">Mask Image Tiling: the 'mask-box-repeat' property</h3>

<pre class='propdef'>
Name: mask-box-repeat
Value: [ stretch | repeat | round | space ]{1,2}
Initial: stretch
Applies to: All elements. In SVG, it applies to <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>container elements</a> without the <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><code class='element-name'>&lt;defs></code></a> element and all <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGraphicsElement'>graphics elements</a>
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

This property specifies how the images for the sides and the middle part of the mask image are scaled and tiled. The first keyword applies to the horizontal sides, the second to the vertical ones. If the second keyword is absent, it is assumed to be the same as the first.

See the 'border-image-repeat' property [[!CSS3BG]] for the definitions of the property values.

The exact process for scaling and tiling the mask box image parts is given in the section <a href="#masking-with-the-mask-box">Masking with the mask-box</a>

<h3 id="the-mask-box">Mask Box Image Shorthand: the 'mask-box' property</h3>

<pre class='propdef'>
Name: mask-box
Value: <<'mask-box-source'>> || <<'mask-box-slice'>> [ / <<'mask-box-width'>>? [ / <<'mask-box-outset'>> ]? ]? || <<'mask-box-repeat'>>
Initial: See individual properties
Applies to: See individual properties
Inherited: no
Percentages: n/a
Computed value: See individual properties
Media: visual
Animatable: See individual properties
</pre>

This is a shorthand property for setting 'mask-box-source', 'mask-box-slice', 'mask-box-width', 'mask-box-outset' and 'mask-box-repeat'. Omitted values are set to their initial values.

Note: The 'mask' shorthand resets the properties 'mask-box', 'mask-box-source', 'mask-box-slice', 'mask-box-width', 'mask-box-outset' and 'mask-box-repeat'.

<h3 id="masking-with-the-mask-box">Masking with the mask-box</h3>

After the mask-box given by 'mask-box-source' is sliced by the 'mask-box-slice' values, the resulting nine images are scaled, positioned, and tiled into their corresponding mask image regions in four steps as described in the section <a href="http://www.w3.org/TR/css3-background/#border-image-process">Drawing the Border Image</a> [[!CSS3BG]].

The application of the 'mask-box-source' property to an element formatted with the CSS box model establishes a <a spec="css21">stacking context</a> in the same way that CSS 'opacity' [[CSS3COLOR]] does, and all the element's descendants are rendered together as a group with the masking applied to the group as a whole.

The 'mask-box-source' property has no effect on the geometry or hit-testing of any element's CSS boxes.

<h2 id="svg-masks">SVG Mask Sources</h2>

<h3 id="MaskElement">The <a element>mask</a> element</h3>

<table class="definition-table">
  <tr>
    <th>Name:</th>
    <td><dfn element>mask</dfn>
  </tr>
  <tr>
    <th>Categories:</th>
    <td><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermContainerElement'>Container element</a></td>
  </tr>
  <tr>
    <th>Content model:</th>
    <td>Any number of the following elements, in any order: <ul class=no-bullets><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermAnimationElement'>animation</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateElement'><span class=element-name>&lt;animate></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateColorElement'><span class=element-name>&lt;animateColor></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateMotionElement'><span class=element-name>&lt;animateMotion></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#AnimateTransformElement'><span class=element-name>&lt;animateTransform></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/animate.html#SetElement'><span class=element-name>&lt;set></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermDescriptiveElement'>descriptive</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DescElement'><span class=element-name>&lt;desc></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#TitleElement'><span class=element-name>&lt;title></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/metadata.html#MetadataElement'><span class=element-name>&lt;metadata></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermShapeElement'>shape</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#CircleElement'><span class=element-name>&lt;circle></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#EllipseElement'><span class=element-name>&lt;ellipse></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#LineElement'><span class=element-name>&lt;line></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/paths.html#PathElement'><span class=element-name>&lt;path></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#PolygonElement'><span class=element-name>&lt;polygon></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#PolylineElement'><span class=element-name>&lt;polyline></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/shapes.html#RectElement'><span class=element-name>&lt;rect></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermStructuralElement'>structural</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#DefsElement'><span class=element-name>&lt;defs></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#GElement'><span class=element-name>&lt;g></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SVGElement'><span class=element-name>&lt;svg></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SymbolElement'><span class=element-name>&lt;symbol></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#UseElement'><span class=element-name>&lt;use></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermGradientElement'>gradient</a> <span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#LinearGradientElement'><span class=element-name>&lt;linearGradient></span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#RadialGradientElement'><span class=element-name>&lt;radialGradient></span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/linking.html#AElement'><span class=element-name>&lt;a></span></a></li><li><a href='#ClipPathElement'><span class=element-name>&lt;clipPath></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/color.html#ColorProfileElement'><span class=element-name>&lt;color-profile></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/interact.html#CursorElement'><span class=element-name>&lt;cursor></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/filters.html#FilterElement'><span class=element-name>&lt;filter></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/fonts.html#FontElement'><span class=element-name>&lt;font></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/fonts.html#FontFaceElement'><span class=element-name>&lt;font-face></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/extend.html#ForeignObjectElement'><span class=element-name>&lt;foreignObject></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#ImageElement'><span class=element-name>&lt;image></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/painting.html#MarkerElement'><span class=element-name>&lt;marker></span></a></li><li><a href='#MaskElement'><span class=element-name>&lt;mask></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement'><span class=element-name>&lt;pattern></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/script.html#ScriptElement'><span class=element-name>&lt;script></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleElement'><span class=element-name>&lt;style></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SwitchElement'><span class=element-name>&lt;switch></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/linking.html#ViewElement'><span class=element-name>&lt;view></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#TextElement'><span class=element-name>&lt;text></span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/text.html#AltGlyphDefElement'><span class=element-name>&lt;altGlyphDef></span></a></li></ul></td>
  </tr>
  <tr>
    <th>Attributes:</th>
    <td><ul class=no-bullets><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermConditionalProcessingAttribute'>conditional processing attributes</a><span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#RequiredFeaturesAttribute'><span class=attr-name>‘requiredFeatures’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#RequiredExtensionsAttribute'><span class=attr-name>‘requiredExtensions’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#SystemLanguageAttribute'><span class=attr-name>‘systemLanguage’</span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermCoreAttributes'>core attributes</a><span class=expanding> — <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#IDAttribute'><span class=attr-name>‘id’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLBaseAttribute'><span class=attr-name>‘xml:base’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLLangAttribute'><span class=attr-name>‘xml:lang’</span></a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/struct.html#XMLSpaceAttribute'><span class=attr-name>‘xml:space’</span></a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/intro.html#TermPresentationAttribute'>presentation attributes</a><span class=expanding> — <a property>alignment-baseline</a>, <a property>baseline-shift</a>, <a property>clip</a>, <a property>clip-path</a>, <a property>clip-rule</a>, <a property>color</a>, <a property>color-interpolation</a>, <a property>color-interpolation-filters</a>, <a property>color-profile</a>, <a property>color-rendering</a>, <a property>cursor</a>, <a property>direction</a>, <a property>display</a>, <a property>dominant-baseline</a>, <a property>enable-background</a>, <a property>fill</a>, <a property>fill-opacity</a>, <a property>fill-rule</a>, <a property>filter</a>, <a property>flood-color</a>, <a property>flood-opacity</a>, <a property>font</a>, <a property>font-family</a>, <a property>font-size</a>, <a property>font-size-adjust</a>, <a property>font-stretch</a>, <a property>font-style</a>, <a property>font-variant</a>, <a property>font-weight</a>, <a property>glyph-orientation-horizontal</a>, <a property>glyph-orientation-vertical</a>, <a property>image-rendering</a>, <a property>kerning</a>, <a property>letter-spacing</a>, <a property>lighting-color</a>, <a property>marker</a>, <a property>marker-end</a>, <a property>marker-mid</a>, <a property>marker-start</a>, <a property>mask</a>, <a property>opacity</a>, <a property>overflow</a>, <a property>pointer-events</a>, <a property>shape-rendering</a>, <a property>stop-color</a>, <a property>stop-opacity</a>, <a property>stroke</a>, <a property>stroke-dasharray</a>, <a property>stroke-dashoffset</a>, <a property>stroke-linecap</a>, <a property>stroke-linejoin</a>, <a property>stroke-miterlimit</a>, <a property>stroke-opacity</a>, <a property>stroke-width</a>, <a property>text-anchor</a>, <a property>text-decoration</a>, <a property>text-rendering</a>, <a property>unicode-bidi</a>, <a property>visibility</a>, <a property>word-spacing</a>, <a property>writing-mode</a></span></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#ClassAttribute'><span class=attr-name>‘class’</span></a></li><li><a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/styling.html#StyleAttribute'><span class=attr-name>‘style’</span></a></li><li><a element-attr for=mask>x</a></li><li><a element-attr for=mask>y</a></li><li><a element-attr for=mask>width</a></li><li><a element-attr for=mask>height</a></li><li><a element-attr for=mask>maskUnits</a></li><li><a element-attr for=mask>maskContentUnits</a></li></ul></td>
  </tr>
  <tr>
    <th>DOM Interfaces:</th>
    <td><a class=idlinterface href='#InterfaceSVGMaskElement'>SVGMaskElement</a></td>
  </tr>
</table>


<div class="adef-list">
  <p><em>Attribute definitions:</em></p>
  <dl dfn-type="element-attr" dfn-for="mask">
    <dt>
      <dfn>maskUnits</dfn> = "<a value for=maskUnits>userSpaceOnUse</a> | <a value for=maskUnits>objectBoundingBox</a>"
    </dt>
    <dd>
      <p>Defines the coordinate system for attributes <a element-attr>x</a>, <a element-attr>y</a>, <a element-attr>width</a> and <a element-attr>height</a>.</p>
      <dl>
        <dt><dfn value for=maskUnits>userSpaceOnUse</dfn></dt>
        <dd>
          <p><a element-attr>x</a>, <a element-attr>y</a>, <a element-attr>width</a> and <a element-attr>height</a> represent values in the current <i>user coordinate system</i> [[!CSS3-TRANSFORMS]] in place at the time when the <a element>mask</a> element is referenced (i.e., the <i>user coordinate system</i> for the element referencing the <a element>mask</a> element via the 'mask' property).</p>
        </dd>
        <dt><dfn dfn-type=value dfn-for=maskUnits>objectBoundingBox</dfn></dt>
        <dd>
          <p><a element-attr>x</a>, <a element-attr>y</a>, <a element-attr>width</a> and <a element-attr>height</a> represent fractions or percentages of the <i>object bounding box</i> of the element to which the mask is applied. <a href="http://www.w3.org/TR/SVG/coords.html#Units">User coordinates</a> are sized equivalently to the CSS ''px'' unit.</p>
        </dd>
      </dl>
      <p>If attribute <a element-attr>maskUnits</a> is not specified, then the effect is as if a value of <a value for=maskUnits>objectBoundingBox</a> were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
    <dt>
      <dfn>maskContentUnits</dfn> = "<a value for=maskContentUnits>userSpaceOnUse</a> | <a value for=maskContentUnits>objectBoundingBox</a>"
    </dt>
    <dd>
      <p>Defines the coordinate system for the contents of the <a element>mask</a>.</p>
      <dl>
        <dt><dfn dfn-type=value dfn-for=maskContentUnits>userSpaceOnUse</dfn></dt>
        <dd>
          <p>The <i>user coordinate system</i> for the contents of the <a element>mask</a> element is the current <i>user coordinate system</i> in place at the time when the <a element>mask</a> element is referenced (i.e., the <i>user coordinate system</i> for the element referencing the <a element>mask</a> element via the 'mask' property).</p>
        </dd>
        <dt><dfn dfn-type=value dfn-for=maskContentUnits>objectBoundingBox</dfn></dt>
        <dd>
          <p>The coordinate system has its origin at the top left corner of the <i>bounding box</i> of the element to which the clipping path applies to  and the same width and height of this <i>bounding box</i>. <a href="http://www.w3.org/TR/SVG/coords.html#Units">User coordinates</a> are sized equivalently to the CSS ''px'' unit.</p></p>
        </dd>
      </dl>
      <p>If attribute <a element-attr>maskContentUnits</a> is not specified, then the effect is as if a value of <a value for=maskContentUnits>userSpaceOnUse</a> were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
    <dt>
      <dfn>x</dfn> = "<<length>> | <<percentage>>"
    </dt>
    <dd>
      <p>The x-axis coordinate of one corner of the rectangle for the largest possible offscreen buffer. If the attribute is not specified but at least one of the attributes <a element-attr>y</a>, <a element-attr>width</a> or <a element-attr>height</a> are specified, the effect is as if a value of ''-10%'' were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
    <dt>
      <dfn>y</dfn> = "<<length>> | <<percentage>>"
    </dt>
    <dd>
      <p>The y-axis coordinate of one corner of the rectangle for the largest possible offscreen buffer.</p>
      <p>If the attribute is not specified but at least one of the attributes <a element-attr>x</a>, <a element-attr>width</a> or <a element-attr>height</a> are specified, the effect is as if a value of ''-10%'' were specified.</P>
      <p>Animatable: yes.</p>
    </dd>
    <dt>
      <dfn>width</dfn> = "<<length>> | <<percentage>>"
    </dt>
    <dd>
      <p>The width of the largest possible offscreen buffer. A negative value or a value of zero disables rendering of the element.</p>
      <p>If the attribute is not specified but at least one of the attributes <a element-attr>x</a>, <a element-attr>y</a> or <a element-attr>height</a> are specified, the effect is as if a value of ''120%'' were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
    <dt>
      <dfn>height</dfn> = "<<length>> | <<percentage>>"
    </dt>
    <dd>
      <p>The height of the largest possible offscreen buffer.</p>
      <p>A negative value or a value of zero disables rendering of the element.</p>
      <p>If the attribute is not specified but at least one of the attributes <a element-attr>x</a>, <a element-attr>y</a> or <a element-attr>width</a> are specified, the effect is as if a value of ''120%'' were specified.</p>
      <p>Animatable: yes.</p>
    </dd>
  </dl>
</div>

If at least one of the attributes <a element-attr>x</a>, <a element-attr>y</a>, <a element-attr>width</a> or <a element-attr>height</a> are specified, the given object and the rectangle defined by <a element-attr>x</a>, <a element-attr>y</a>, <a element-attr>width</a> and <a element-attr>height</a> establish a current clipping path. The rendered content of the mask must be clipped by this current clipping path.

CSS properties inherit into the <a element>mask</a> element from its ancestors; properties do <em>not</em> inherit from the element referencing the <a element>mask</a> element.

<a element>mask</a> elements are never rendered directly; their only usage is as something that can be referenced using the 'mask' property. The 'opacity', 'filter' and 'display' properties do not apply to the <a element>mask</a> element; thus, <a element>mask</a> elements are not directly rendered even if the 'display' property is set to a value other than ''none'', and <a element>mask</a> elements are available for referencing even when the 'display' property on the <a element>mask</a> element or any of its ancestors is set to ''none''.

<h3 id="the-mask-source-type">Mask Source Interpretation: the 'mask-source-type' property</h3>

<pre class='propdef'>
Name: mask-source-type
Value: luminance | alpha
Initial: luminance
Applies to: <a element>mask</a> elements
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: no
</pre>

The 'mask-source-type' property defines whether the content of the <a element>mask</a> element is treated as as luminance mask or alpha mask, as described in <a href="#MaskValues">Calculating mask values</a>.

Values have the following meanings:

<dl dfn-for="mask-source-type" dfn-type=value>
  <dt><dfn>luminance</dfn></dt>
  <dd>
    Indicates that the luminance values of the mask should be used.
  </dd>
  <dt><dfn>alpha</dfn></dt>
  <dd>
    Indicates that the alpha values of the mask should be used.
  </dd>
</dl>

The 'mask-source-type' property allows the author of the <a element>mask</a> element to specify the preferred masking operation. However, the author can override this preference by setting the 'mask-type' value to something different than ''auto'' on the masked content.

<div class=example>
<p>In the following example the computed value of 'mask-source-type' is <a value for=mask-source-type>luminance</a> and the computed value of 'mask-type' is ''auto''. The UA must follow the preferred masking operation defined on the <a element>mask</a> element.

<pre><code class=html>
&lt;svg>
  &lt;mask style="mask-source-type: luminance;" id="mask">
    ...
  &lt;/mask>
&lt;/svg>

&lt;p style="mask-image: url(#mask); mask-type: auto;">
  This is the masked content.
&lt;/p>
</code></pre>

<p>In the next example the computed value of 'mask-type' is <a value for=mask-type>alpha</a> and overrides the preference on the <a element>mask</a> element that is computed to <a value for=mask-source-type>luminance</a>. The mask image is used as an alpha mask.</p>

<pre><code class=html>
&lt;svg>
  &lt;mask style="mask-source-type: luminance;" id="mask2">
    ...
  &lt;/mask>
&lt;/svg>

&lt;p style="mask-image: url(#mask2); mask-type: alpha;">
  This is the masked content.
&lt;/p>
</code></pre>
</div>

The 'mask-source-type' property is a presentation attribute for SVG elements.

<h2 id="security">Security</h2>

It is important that the timing to the masking operations is independent of the source and destination pixel. Masking operations must be implemented in such a way that they always take the same amount of time regardless of the pixel values. If this rule is not followed, an attacker could infer information and mount a timing attack.

A timing attack is a method of obtaining information about content that is otherwise protected, based on studying the amount of time it takes for an operation to occur. If, for example, red pixels took longer to draw than green pixels, one might be able to reconstruct a rough image of the element being rendered, without ever having access to the content of the element.

<<mask-source>>s and <<clip-source>>s have special requirements on fetching resources.

User agents must use the <a href="http://www.w3.org/TR/html5/infrastructure.html#cors-enabled-fetch">potentially CORS-enabled fetch</a> method defined by the [[!HTML5]] specification for all <<mask-source>>, <<clip-source>> and <<image>> values on the 'mask-image', 'mask-box-source' and 'clip-path' properties. When fetching, user agents must use “Anonymous” mode, set the referrer source to the stylesheet's URL and set the origin to the URL of the containing document. If this results in network errors, the effect is as if the value ''none'' had been specified.

<h2 id="clip-property" class="no-num">Appendix A: The deprecated 'clip' property</h3>

<pre class='propdef'>
Name: clip
Value: <<rect()>> | auto
Initial: auto
Applies to: Absolutely positioned elements. In SVG, it applies to <a href="http://www.w3.org/TR/SVG/coords.html#EstablishingANewViewport">elements which establish a new viewport</a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement'><code class='element-name'>&lt;pattern></code></a> elements and <a element>mask</a> elements.
Inherited: no
Percentages: n/a
Computed value: as specified
Media: visual
Animatable: as <a href="http://dev.w3.org/csswg/css3-transitions/#animtype-rect">rectangle</a>
</pre>

With this specification the 'clip' property is deprecated. Authors are encouraged to use the 'clip-path' property instead. UAs must support the 'clip' property.

The 'clip' property applies only to absolutely positioned elements. In SVG, it applies to <a href="http://www.w3.org/TR/SVG/coords.html#EstablishingANewViewport">elements which establish a new viewport</a>, <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/pservers.html#PatternElement'><code class='element-name'>&lt;pattern></code></a> elements and <a element>mask</a> elements. Values have the following meanings:

<dl>
  <dt>auto</dt>
  <dd>The element does not clip.</dd>
  <dt><dfn>rect()</dfn> = rect( <<top>>, <<right>>, <<bottom>>, <<left>> )</dt>
  <dd>
    <p><<top>> and <<bottom>> specify offsets from the top border edge of the box, and <<right>>, and <<left>> specify offsets from the left border edge of the box. Authors should separate offset values with commas. User agents must support separation with commas, but may also support separation without commas (but not a combination), because a previous revision of this specification was ambiguous in this respect.</p>
    <p><dfn>&lt;top></dfn>, <dfn>&lt;right></dfn>, <dfn>&lt;bottom></dfn>, and <dfn>&lt;left></dfn> may either have a <<length>> value or ''auto''. Negative lengths are permitted. The value ''auto'' means that a given edge of the clipping region will be the same as the edge of the element's generated border box (i.e., ''auto'' means the same as ''0'' for <<top>> and <<left>>, the same as the used value of the height plus the sum of vertical padding and border widths for <<bottom>>, and the same as the used value of the width plus the sum of the horizontal padding and border widths for <<right>>, such that four ''auto'' values result in the clipping region being the same as the element's border box).</p>
    <p>When coordinates are rounded to pixel coordinates, care should be taken that no pixels remain visible when <<left>> and <<right>> have the same value (or <<top>> and <<bottom>> have the same value), and conversely that no pixels within the element's border box remain hidden when these values are ''auto''.</p>
  </dd>
</dl>

<div class="example">
  <p>Example: The following two rules:</p>

  <pre><code class=css>
p#one { clip: rect(5px, 40px, 45px, 5px); }
p#two { clip: rect(5px, 55px, 45px, 5px); }</code></pre>

  <p>and assuming both Ps are 50 by 55 pixel, will create, respectively, the rectangular clipping regions delimited by the dashed lines in the following illustrations:</p>

  <div class=figure>
    <img src="images/clip.svg" width="580" height="300" alt="Values for rect shape">
    <p class=caption>This diagram illustrates two block boxes, one next to the other, with rectangular clipping regions of different dimensions. (See <a href="http://www.w3.org/TR/CSS2/images/longdesc/clip-desc.html">long description</a>.)</p>
  </div>
</div>

<h2 id="DOMInterfaces" class="no-num">Appendix B: DOM interfaces</h2>

<h3 id="InterfaceSVGClipPathElement">Interface SVGClipPathElement</h3>

<p>The <a href='#InterfaceSVGClipPathElement'>SVGClipPathElement</a> interface corresponds to the <a element>clipPath</a> element.</p>

<pre class="idl" data-no-idl>interface <b>SVGClipPathElement</b> : <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGElement'>SVGElement</a> {
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a> <a element-attr>clipPathUnits</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#InterfaceSVGAnimatedTransformList'>SVGAnimatedTransformList</a> <a href="#SVGClipPathElement__transform">transform</a>;
};

<a href='#InterfaceSVGClipPathElement'>SVGClipPathElement</a> implements <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGUnitTypes'>SVGUnitTypes</a>;</pre>

<dl class="interface">
<dt class="attributes-header">Attributes:</dt>
<dd>
<dl class="attributes">

<dt id="SVGClipPathElement__clipPathUnits" class="attribute first-child"><b>clipPathUnits</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>clipPathUnits</a> on the given
<a element>clipPath</a> element. Takes one of the constants defined in
<a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGUnitTypes'>SVGUnitTypes</a>.
</div>
</dd>

<dt id="SVGClipPathElement__transform" class="attribute first-child"><b>transform</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/coords.html#InterfaceSVGAnimatedTransformList'>SVGAnimatedTransformList</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to presentation attribute 'transform' on the given element.
</div>
</dd>
</dl>
</dd>
</dl>

<h3 id="InterfaceSVGMaskElement">Interface SVGMaskElement</h3>

<p>The <a href='#InterfaceSVGMaskElement'>SVGMaskElement</a> interface corresponds to the <a element>mask</a> element.</p>

<pre class="idl" data-no-idl>interface <b>SVGMaskElement</b> : <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGElement'>SVGElement</a> {
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a> <a href="#SVGMaskElement__maskUnits">maskUnits</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a> <a href="#SVGMaskElement__maskContentUnits">maskContentUnits</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a> <a href="#SVGMaskElement__x">x</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a> <a href="#SVGMaskElement__y">y</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a> <a href="#SVGMaskElement__width">width</a>;
  readonly attribute <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a> <a href="#SVGMaskElement__height">height</a>;
};

<a href='#InterfaceSVGMaskElement'>SVGMaskElement</a> implements <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGUnitTypes'>SVGUnitTypes</a>;</pre>

<dl class="interface">
<dt class="attributes-header">Attributes:</dt>
<dd>
<dl class="attributes">

<dt id="SVGMaskElement__maskUnits" class="attribute first-child"><b>maskUnits</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>maskUnits</a> on the given
<a element>mask</a> element.  Takes one of the constants defined in
<a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGUnitTypes'>SVGUnitTypes</a>.
</div>
</dd>

<dt id="SVGMaskElement__maskContentUnits" class="attribute"><b>maskContentUnits</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedEnumeration'>SVGAnimatedEnumeration</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>maskContentUnits</a> on the given
<a element>mask</a> element.  Takes one of the constants defined in
<a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGUnitTypes'>SVGUnitTypes</a>.

</div>
</dd>

<dt id="SVGMaskElement__x" class="attribute"><b>x</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>x</a> on the given <a element>mask</a>
element.

</div>
</dd>

<dt id="SVGMaskElement__y" class="attribute"><b>y</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>y</a> on the given <a element>mask</a>
element.

</div>
</dd>

<dt id="SVGMaskElement__width" class="attribute"><b>width</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>width</a> on the given
<a element>mask</a> element.

</div>
</dd>

<dt id="SVGMaskElement__height" class="attribute"><b>height</b><span class="idl-type-parenthetical"> (readonly <a href='http://www.w3.org/TR/2011/REC-SVG11-20110816/types.html#InterfaceSVGAnimatedLength'>SVGAnimatedLength</a>)</span></dt>
<dd class="attribute">
<div>
Corresponds to attribute <a element-attr>height</a> on the given
<a element>mask</a> element.

</div>
</dd>
</dl>
</dd>
</dl>

<h2 class="no-num" id="changes">Changes since last publication</h2>

The following changes were made since the <a href="http://www.w3.org/TR/2013/WD-css-masking-1-20131029/">29 October 2013 Last Call Working Draft</a>.

<ul>
<li>Remove note that a future version of the spec will allow controlling hit testing on clipping.</li>
<li>Changed order of sections within the document.</li>
<li>Make clear that the <i>used value</i> of the properties 'mask-image', 'mask-repeat', 'mask-position', 'mask-clip', 'mask-origin' and 'mask-size' must be ignored for <<mask-source>>, not the properties.</li>
<li>"Animatable" section of 'mask-size', 'mask-position' described as repeatable list of lists. Changed to a single list.</li>
<li>Computed value of 'mask-repeat' and 'mask-position' was described as list of items. Changed to have just one value.</li>
<li>Change link to ED from <a href='http://dev.w3.org/fxtf/masking/'>http://dev.w3.org/fxtf/masking/</a> to <a href='http://dev.w3.org/fxtf/css-masking-1/'>http://dev.w3.org/fxtf/css-masking-1/</a></li>
</ul>


The following significant changes were made since the <a href="http://www.w3.org/TR/2013/WD-css-masking-20130620/">20 June 2013 Working Draft</a>.

<ul>
<li>'mask' resets 'mask-box' properties.</li>
<li>Initial values for 'mask-repeat', 'mask-position' and 'mask-origin' changed to ''no-repeat'', ''center'' and <a value for=mask-origin>border-box</a>.</li>
<li>Multiple layers of mask images were deferred to a future level of this specification.</li>
<li>Added security model for pixel operations and fetching of masking and clipping resources.</li>
<li>Deferred ''child'' and select() function to next level.</li>
</ul>

The following significant changes were made since the <a href="http://www.w3.org/TR/2012/WD-css-masking-20121115/">15 November 2012 Working Draft</a>.

<ul>
<li>Better integration with terms and definitions of CSS Backgrounds and Borders module.
<li>Syntax changes on 'mask' shorthand property to be conform with 'background' shorthand property.
<li>Define how the implementation can differ between an SVG resource (<a element>mask</a>, <a element>clipPath</a>) and an image resource.
<li>Added 'mask-type' property to alter between luminance and alpha mask on 'mask-image'.
<li>Adapt IDL definition of SVGMaskElement and SVGClipPathElement to WebIDL.
<li>Further editorial changes.
</ul>

See detailed list of changes in the <a href="ChangeLog">ChangeLog</a>.

<h2 class=no-num id="acknowledgments">Acknowledgments</h2>

Thanks to Elika J. Etemad, Liam R. E. Quin, Björn Höhrmann and Alan Stearns for their careful reviews, comments, and corrections. Special thanks to CJ Gammon for graphical assets.